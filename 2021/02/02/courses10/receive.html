<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<title>学生团员“寒假十课”</title>
	<meta name="keywords" content='学生团员“寒假十课”'>
	<meta name="description" content='学生团员“寒假十课”'>
	<link type="text/css" rel="stylesheet" href="css/swiper.min.css">
	<link type="text/css" rel="stylesheet" href="css/main.css">
	<style>
		#next {
			display: none;
		}
		.d_cabc {
			z-index: 20;
		}
		.btns {
			display: none;
		}
		.xhx {
			color: #ffcd03; 
			text-align: center; 
			border-bottom: 0.04rem solid #fff;
		}
		.xhx1 {
			color: #ffcd03; 
			text-align: center; 
			text-decoration:underline;
			-webkit-text-decoration:underline;
			text-decoration-color: #FFF;
			-webkit-text-decoration-color: #FFF;
			-moz-text-decoration-color: #FFF;
   		/* text-underline-position: under; */
			text-underline-position: below;

		}
	</style>
</head>

<body>
	<div class="btns">
		<div class="d d_back"  data-html2canvas-ignore="true">
			<a href="javascript:goback();" class="btn2 btn_back"></a>
			<a href="javascript:toNext();" class="btn2 btn_next" id="next" ></a> 
		</div>
		<div class="d2 d_cabc"></div>
	</div>
	<div class="wrap">
		<div class="swiper-container">
			<div class="swiper-wrapper">

				<div class="swiper-slide" id="huizhang">
					<div class="area P6">
						<div class="d d_p6">
							<div class="d d_name2">
								<p class="d">
									<label class="fl">我是共青团员</label>&nbsp<span class="xhx" id="tuanname"></span>
								</p>
								<p>
									<span class="xhx" id="tuanname1"></span>
									&nbsp，我完成了学生团员“寒假十课”
									<span id="tuanclasses"></span>
								</p>
							</div>
							<div class="d hzP">
								<div class="d2 d_hz"> <img src="images/bg_hz1.png" alt="" id="tuanHZ"> </div>
							</div>
							<!-- <div class="d d_back"  data-html2canvas-ignore="true">
								<a href="javascript:goback();" class="btn2 btn_back"></a>
								<a href="javascript:toNext();" class="btn2 btn_next" id="next" ></a> 
							</div>
							<div class="d2 d_cabc"></div> -->
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/jweixin-1.6.0.js"></script>
	<script type="text/javascript" src="js/html2canvas.min.js" charset="utf-8"></script>
	<script type="text/javascript" src="js/main.js"></script>
	<script type="text/javascript" src="js/hm.js"></script>
	<script type="text/javascript">
		let courseId = GetQueryString("courseId");
		let name = GetQueryString("name");
		if(courseId < 10) {
			$("#next").show();
		}
		renderHtml(name);

    function onBridgeReady() {
      WeixinJSBridge.call('hideOptionMenu');
    }

    $(document).ready(function() {
      if (typeof WeixinJSBridge == "undefined") {
        if (document.addEventListener) {
          document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
        } else if (document.attachEvent) {
          document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
          document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
        }
      } else {
        onBridgeReady();
      }
      var url = window.location.href.split('#')[0];
      var shareData = {
        title:'我正在学习共青团员“寒假十课”',
        desc:'答题还能赢专属徽章，你也来看看吧！',
        link: "https://hj10k.k618.cn/tuan/index.html", //分享的链接地址
        imgUrl: "https://hj10k.k618.cn/tuan/images/wxshare.jpg", // 分享图标
        type: 'link', // 分享类型,music、video或link，不填默认为link
        dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
        success: function () {
        },
        cancel: function () {
        }
      };
//			weixinShare("wx591ea71490e6902b", encodeURIComponent(url), shareData);
	});

	function renderHtml(name) {
		$('#tuanname').html(name.substring(0,4));
		$('#tuanname1').html(name.substring(4));
		
		$("#tuanclasses").html('第'+numtocnnum(courseId)+'课！');
		$('#tuanHZ').attr('src', `images/bg_hz${courseId}.png`);

		setTimeout(function () {
				html2canvas(document.getElementById('huizhang'), {
				allowTaint: true,
				useCORS: true
			}).then(canvas => {
				$(".wrap").empty();
				let oImg = new Image();
				oImg.src = canvas.toDataURL();
				oImg.width = document.body.clientWidth;

				$(".btns").show()
				$(".wrap").html(oImg);
			});
		}, 500);
	}
	
	function goback() {
		window.location.href='index.html?name='+name;
	}
	function toNext() {
		window.location.href='receive.html?v=1&courseId=' + (parseInt(courseId) + 1) + '&name='+name;
	}
	</script>
</body>

</html>